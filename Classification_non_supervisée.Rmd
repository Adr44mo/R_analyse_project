---
title: "Classification_non_supervisÃ©e"
author: "moi"
date: "2025-04-03"
output: html_document
---

# Classification non supervisÃ©e

ğŸ“Œ 1. PrÃ©paration des donnÃ©es On prÃ©pare les donnÃ©es en supprimant les variables inutiles et en sâ€™assurant que les variables qualitatives sont bien en facteur.

```{r}
# Charger les donnÃ©es nettoyÃ©es
data <- cleaned_data

# Suppression des colonnes non utiles (nom, symbole, index, etc.)
data <- data %>% select(-c(Continent))

# Convertir les variables qualitatives en facteur
data$sector <- as.factor(data$sector)
data$country <- as.factor(data$country)
data$esgPerformance <- as.factor(data$esgPerformance)

# VÃ©rification des NA et nettoyage
data <- na.omit(data)
```

ğŸ“Œ 2. Analyse Factorielle des DonnÃ©es Mixtes (FAMD) On utilise FAMD (Analyse Factorielle des DonnÃ©es Mixtes) pour gÃ©rer variables quantitatives et qualitatives.

```{r}
# FAMD sur les donnÃ©es
res_famd <- FAMD(data, graph = TRUE, ncp = 5)
```

```{r}
# Cercle des corrÃ©lations
plot(res_famd, choix = "quanti")

# Graphique des individus
plot(res_famd, choix = "ind")

# changer les dimensions
plot(res_famd, choix = "ind", axes = c(1,3),cos2 = 0.8)
```

ğŸ“Œ 3. Clustering avec k-means sur les premiÃ¨res composantes On applique k-means pour regrouper les entreprises.

```{r}
# Afficher la variance expliquÃ©e par dimension
print(res_famd$eig)

# Calculer la variance cumulÃ©e
variance_cumulee <- cumsum(res_famd$eig[, 2])
print(variance_cumulee)

```

```{r}
# SÃ©lection des 5 premiÃ¨res dimensions
coord <- res_famd$ind$coord[, 1:5]

# Choix du nombre de clusters (mÃ©thode de l'inertie)
inertie.intra <- rep(0, 10)
for (k in 1:20) {
  kmeans_res <- kmeans(coord, centers = k, nstart = 100)
  inertie.intra[k] <- kmeans_res$tot.withinss / kmeans_res$totss
}

# Affichage du graphique pour choisir le bon nombre de clusters
plot(1:20, inertie.intra, type = "b", xlab = "Nb. de groupes", ylab = "% inertie intra")

# On choisit 3 groupes ici (Ã  ajuster selon le graphique)
kmeans_result <- kmeans(coord, centers = 3, nstart = 100)

# Ajout des clusters aux donnÃ©es
data_cluster <- cbind.data.frame(data, cluster = factor(kmeans_result$cluster))

# observer les clusters
table(data_cluster$cluster)


```

ğŸ“Œ 4. Classification HiÃ©rarchique (CAH) avec HCPC On applique la Classification Ascendante HiÃ©rarchique (CAH) pour vÃ©rifier si les groupes sont cohÃ©rents.

```{r}
# Lancer la CAH sur les rÃ©sultats de FAMD
cah_res <- HCPC(res_famd, nb.clust = -1, graph = TRUE)
```

ğŸ“Œ 5. InterprÃ©tation des clusters On analyse les groupes obtenus.

```{r}
table(data_cluster$cluster)

# Moyennes des variables par cluster
aggregate(data_cluster, by = list(data_cluster$cluster), FUN = mean)


```

```{r}

# Contribution des variables aux axes, du plus au moins impactant
# Boucle sur toutes les dimensions
for (i in 1:ncol(res_famd$var$contrib)) {
  cat("\nDimension", i, ":\n")
  
  # Trier les contributions des variables pour la dimension i
  contributions <- sort(res_famd$var$contrib[, i], decreasing = TRUE)
  
  # Afficher les 5 premiÃ¨res variables les plus influentes
  print(head(contributions, 5))
}


```

ğŸ”¹ InterprÃ©tation des dimensions 

1.Dimension 1 (Axe principal - Facteurs financiers)

- Regroupe des variables Ã©conomiques et financiÃ¨res clÃ©s (revenus, dividendes, valeur comptable).

- ReprÃ©sente la soliditÃ© financiÃ¨re et la performance Ã©conomique dâ€™une entreprise.

- Une forte valeur sur cet axe indique une entreprise avec une capitalisation boursiÃ¨re Ã©levÃ©e et de bons rÃ©sultats financiers.

2.Dimension 2 (Facteurs ESG et environnementaux)

- Met en avant les scores ESG (Environnement, Social, Gouvernance) et le secteur d'activitÃ©.

- ReprÃ©sente l'engagement des entreprises envers les pratiques durables et responsables.

- Une entreprise avec un score Ã©levÃ© ici est bien notÃ©e sur les critÃ¨res ESG et est dans un secteur oÃ¹ ces aspects sont valorisÃ©s.

3.Dimension 3 (Marge et rentabilitÃ© sectorielle)

- Regroupe des indicateurs de rentabilitÃ© comme l'EBITDA, les marges opÃ©rationnelles et le secteur.

- Indique la capacitÃ© dâ€™une entreprise Ã  gÃ©nÃ©rer des profits par rapport Ã  son secteur.

- Une valeur Ã©levÃ©e ici correspond Ã  une entreprise trÃ¨s rentable dans son industrie.

4.Dimension 4 (Retour sur actifs et rendement des investissements)

- Focalise sur le retour sur actifs (ROA), le rendement sur investissements et lâ€™appartenance Ã  un groupe sectoriel.

- Met en Ã©vidence les entreprises qui utilisent efficacement leurs ressources pour gÃ©nÃ©rer des profits.

- Une valeur forte ici suggÃ¨re une excellente gestion des actifs et un bon retour sur investissement.

5.Dimension 5 (SantÃ© financiÃ¨re et liquiditÃ©)

- Associe le secteur, la liquiditÃ© (current ratio, quick ratio) et le pays.

- Capture la capacitÃ© dâ€™une entreprise Ã  faire face Ã  ses obligations financiÃ¨res Ã  court terme.

- Une valeur Ã©levÃ©e indique une entreprise avec une bonne gestion de sa trÃ©sorerie et un faible risque de liquiditÃ©.